# Logitech G Pro X (3.5mm jack) - 10 Band Equalizer for PipeWire
# Based on AutoEQ profile (Preamp: -6.77 dB)

context.modules = [
    { name = libpipewire-module-filter-chain
        args = {
            node.description = "Equalizer Sink - Logitech G Pro X"
            media.name       = "Equalizer Sink - Logitech G Pro X"
            filter.graph = {
                nodes = [
                    # Preamp compensation (reduce global gain)
                    {
                        type = builtin
                        name = preamp
                        label = bq_highpass
                        control = { "Freq" = 20.0 "Q" = 0.7 "Gain" = -6.77 }
                    }

                    # Band 1: Low shelf
                    {
                        type = builtin
                        name = eq_band_1
                        label = bq_lowshelf
                        control = { "Freq" = 105.0 "Q" = 0.70 "Gain" = 3.4 }
                    }

                    # Band 2
                    {
                        type = builtin
                        name = eq_band_2
                        label = bq_peaking
                        control = { "Freq" = 141.9 "Q" = 0.75 "Gain" = -5.8 }
                    }

                    # Band 3
                    {
                        type = builtin
                        name = eq_band_3
                        label = bq_peaking
                        control = { "Freq" = 210.0 "Q" = 2.01 "Gain" = -2.1 }
                    }

                    # Band 4
                    {
                        type = builtin
                        name = eq_band_4
                        label = bq_peaking
                        control = { "Freq" = 385.8 "Q" = 1.35 "Gain" = 4.6 }
                    }

                    # Band 5
                    {
                        type = builtin
                        name = eq_band_5
                        label = bq_peaking
                        control = { "Freq" = 862.2 "Q" = 1.18 "Gain" = 2.0 }
                    }

                    # Band 6
                    {
                        type = builtin
                        name = eq_band_6
                        label = bq_peaking
                        control = { "Freq" = 1637.6 "Q" = 1.78 "Gain" = -4.7 }
                    }

                    # Band 7
                    {
                        type = builtin
                        name = eq_band_7
                        label = bq_peaking
                        control = { "Freq" = 2396.5 "Q" = 3.97 "Gain" = -2.6 }
                    }

                    # Band 8
                    {
                        type = builtin
                        name = eq_band_8
                        label = bq_peaking
                        control = { "Freq" = 3556.0 "Q" = 5.54 "Gain" = 3.5 }
                    }

                    # Band 9
                    {
                        type = builtin
                        name = eq_band_9
                        label = bq_peaking
                        control = { "Freq" = 4816.8 "Q" = 2.20 "Gain" = 6.2 }
                    }

                    # Band 10: High shelf
                    {
                        type = builtin
                        name = eq_band_10
                        label = bq_highshelf
                        control = { "Freq" = 10000.0 "Q" = 0.70 "Gain" = 6.7 }
                    }
                ]

                links = [
                    { output = "preamp:Out"     input = "eq_band_1:In" }
                    { output = "eq_band_1:Out"  input = "eq_band_2:In" }
                    { output = "eq_band_2:Out"  input = "eq_band_3:In" }
                    { output = "eq_band_3:Out"  input = "eq_band_4:In" }
                    { output = "eq_band_4:Out"  input = "eq_band_5:In" }
                    { output = "eq_band_5:Out"  input = "eq_band_6:In" }
                    { output = "eq_band_6:Out"  input = "eq_band_7:In" }
                    { output = "eq_band_7:Out"  input = "eq_band_8:In" }
                    { output = "eq_band_8:Out"  input = "eq_band_9:In" }
                    { output = "eq_band_9:Out"  input = "eq_band_10:In" }
                ]
            }

            audio.channels = 2
            audio.position = [ FL FR ]

            capture.props = {
                node.name   = "effect_input.eq_gpro"
                media.class = Audio/Sink
            }

            playback.props = {
                node.name     = "effect_output.eq_gpro"
                node.passive  = true
                target.object = "alsa_output.pci-0000_00_1f.3.analog-stereo"
            }
        }
    }
]
